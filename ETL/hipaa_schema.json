{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "HIPAA Legal Document Chunk",
  "description": "Схема для валидации парсинга юридических документов (HIPAA)",
  "type": "object",
  "oneOf": [
    { "$ref": "#/definitions/section_chunk" },
    { "$ref": "#/definitions/part_metadata_chunk" },
    { "$ref": "#/definitions/subpart_metadata_chunk" },
    { "$ref": "#/definitions/reserved_section_chunk" },
    { "$ref": "#/definitions/reserved_subpart_chunk" }
  ],
  "definitions": {
    
    "section_chunk": {
      "type": "object",
      "properties": {
        "type": { "const": "section" },
        "part": { "type": "string", "examples": ["160"] },
        "part_title": { "type": "string" },
        "subpart": { "type": "string", "examples": ["A"] },
        "subpart_title": { "type": "string" },
        "section": { "type": "string", "examples": ["§ 160.103"] },
        "section_title": { "type": "string" },
        "text": { "type": "string" },
        "references": { 
          "type": "array", 
          "items": { "type": "string" } 
        },
        "chunk_id": { "type": "string" }
      },
      "required": ["type", "part", "section", "text", "chunk_id"]
    },

    "part_metadata_chunk": {
      "type": "object",
      "properties": {
        "type": { "const": "part_metadata" },
        "part": { "type": "string" },
        "part_title": { "type": "string" },
        "authority": { "type": "string" },
        "source": { "type": "string" },
        "text": { "type": "string" },
        "chunk_id": { "type": "string" }
      },
      "required": ["type", "part", "text", "chunk_id"]
    },

    "subpart_metadata_chunk": {
      "type": "object",
      "properties": {
        "type": { "const": "subpart_metadata" },
        "part": { "type": "string" },
        "subpart": { "type": "string" },
        "subpart_title": { "type": "string" },
        "source": { "type": "string" },
        "text": { "type": "string" },
        "chunk_id": { "type": "string" }
      },
      "required": ["type", "part", "subpart", "text", "chunk_id"]
    },

    "reserved_section_chunk": {
      "type": "object",
      "properties": {
        "type": { "const": "reserved_section" },
        "part": { "type": "string" },
        "subpart": { "type": "string" },
        "section": { "type": "string" },
        "text": { "const": "[Reserved]" },
        "chunk_id": { "type": "string" }
      },
      "required": ["type", "part", "section", "text", "chunk_id"]
    },

    "reserved_subpart_chunk": {
      "type": "object",
      "properties": {
        "type": { "const": "reserved_subpart" },
        "part": { "type": "string" },
        "subpart": { "type": "string" },
        "text": { "pattern": ".*Reserved.*" },
        "chunk_id": { "type": "string" }
      },
      "required": ["type", "part", "subpart", "text", "chunk_id"]
    }
  }
}